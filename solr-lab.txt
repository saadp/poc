== HDP Search with Apache Solr ==A Hortonworks University Hadoop Training Course////////////////////////////////////////////////////////////////////////////Version: 0.1Date: September 2015Copyright © Hortonworks Inc 2015All Rights Reserved. Hadoop and the Hadoop elephant logo are trademarks of the Apache Software Foundation.The contents of this course and all its related materials, including lab exercises and files, are Copyright © Hortonworks Inc 2015.No part of this publication may be reproduced, stored in a retrieval system, or transmitted in any form or by any means electronic, mechanical, photocopying, recording or otherwise without the prior written permission of Hortonworks Inc.////////////////////////////////////////////////////////////////////////////=== Lab 1.1: Apache Solr Demo ===*Objective:*Create core, index pdf files, search, delete using the built in post tool and web ui*Location of Files:*/root/solr-lab-data*Successful Outcome:*Ability to:- create a core- index pdf files- search for content- delete*Before You Begin:*Ensure that you can access your HDP 2.3 instance==== Step 1: If Solr is not enabled, enable it ====1.1. ssh into your 2.3 instance[root@sandbox bin]# cd ~[root@sandbox bin]# ./start_solr.sh==== Step 2: Create a core/collection ====2.1. In your browser, navigate to http://<my_instance>:89832.2. Goto Core Admin and Add Core and enter the details exactly as follows:2.3. Now you’re ready to index documents==== Step 3: Index documents in your ssh session ====3.1. Navigate to the post tool[root@sandbox bin]# cd /opt/lucidworks-hdpsearch/solr/bin3.2. Index the pdfs that are in the data directory. These pdfs are a page-by-page split of the popular Developer Pig & Hive class. There are 200+ pdfs.[root@sandbox bin]# ./post  -c labs ~/solr-lab-data/*.pdf3.3. The result should look similar to this////////////////////////////////////////////////////////////////////////////Need screenshot////////////////////////////////////////////////////////////////////////////222 files indexed.COMMITting Solr index changes to http://localhost:8983/solr/labs/update...Time spent: 0:00:04.3683.4. You have now indexed 222 documents. Let’s search them next==== Step 4: In your browser, navigate to http://<my_instance>:8983/labs/browse ====4.1. Search for anything you want! For example search for “pig & hive”4.2. Notice that Solr will do automatic search highlighting4.3. All of these features are also exposed via APIs==== Step 5: Let’s now delete documents based on a search criteria ====5.1. In your terminal (the below command is all in one line). It will delete everything.[root@sandbox bin]# ./post -c labs -d '<delete><query>id:*</query></delete>'5.2. You should see the following results in your terminalCOMMITting Solr index changes to http://localhost:8983/solr/labs/update...Time spent: 0:00:00.0415.3. Also verify that no documents are returned when you searchResult: You have created a solr core, indexed documents, searched, and deleted!////////////////////////////////////////////////////////////////////////////NOTES 4		Copyright © 2015, Hortonworks, Inc.Copyright © 2015, Hortonworks, Inc.		3////////////////////////////////////////////////////////////////////////////